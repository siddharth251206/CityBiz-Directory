<%- include('partials/header', { title: 'CityBiz Directory', currentPage: 'home', stylesheets: ['mainstyles.css'] }) %>

<main>
    <section class="hero-section">
        <div class="hero-content">
            <h1>Find the best local businesses</h1>
            <p>From cafes to plumbers, we have you covered.</p>
            
            <form action="/search" method="GET" class="hero-search-form">
                <input type="text" name="query" placeholder="What are you looking for?" class="hero-search-what">
                <button type="submit" class="hero-search-btn">Search</button>
            </form>
        </div>
    </section>

    <section class="category-section">
        <h2 class="section-heading">Browse by Category</h2>
        <div class="category-grid">
            <% if (typeof categories !== 'undefined' && categories.length > 0) { %>
                <% categories.forEach(category => { %>
                  <a href="/search?category=<%= encodeURIComponent(category.name) %>" class="category-card">
                    <span><%= category.name %></span>
                  </a>
                <% }) %>
            <% } else { %>
                <p>No categories found.</p>
            <% } %>
        </div>
    </section>

    <section class="top-business-section">
        <h2 class="section-heading">Top Rated Businesses</h2>
        
        <div class="topbuss" id="topbuss"></div>
    </section>

</main>

<script>
    // Pass the top-rated businesses to your client-side scripts
    const businesses = <%- JSON.stringify(businesses || []) %>;
</script>

<%- include('partials/footer', { scripts: ['utils.js', 'mainpage.js'] }) %>